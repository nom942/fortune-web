<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FORTUNE</title>
    <link rel="icon" type="image/x-icon" href="fortune-ico.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="section section3">
        <div class="top-rectangle"></div>

        <div class="header-left">
            <a href="index.html"> 
                <img src="fortune-art.png" alt="Fortune" class="about-image">
            </a>
        </div>

        <div class="header-right">
            <a href="https://discord.gg/PuvrCtAU" target="_blank">
                <img src="discord-logo.webp" alt="Discord" class="discord-logo">
            </a>
        </div>

        <div class="content">
            <h1 class="application-header">Application Form</h1>

            <form class="application-form" id="application-form">
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" required>

                <label for="age">Age:</label>
                <input type="number" id="age" name="age" required>

                <label for="discord">Discord Tag:</label>
                <input type="text" id="discord" name="discord" placeholder="Example#1234" required>

                <label for="experience">What is your experience with SCP:SL?</label>
                <textarea id="experience" name="experience" rows="4" required></textarea>

                <label for="motivation">Why do you want to join our community?</label>
                <textarea id="motivation" name="motivation" rows="4" required></textarea>

                <label for="rules">Do you agree to follow the community rules?</label>
                <select id="rules" name="rules" required>
                    <option value="">Select</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>

                <button type="submit" class="submit-btn">Submit Application</button>
            </form>

            <div id="notification" class="notification"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const form = document.getElementById('application-form');
            const notificationBox = document.getElementById('notification');

            form.addEventListener('submit', function(event) {
                event.preventDefault(); 

                const username = document.getElementById('username').value;
                const age = document.getElementById('age').value;
                const discordTag = document.getElementById('discord').value;
                const experience = document.getElementById('experience').value;
                const motivation = document.getElementById('motivation').value;
                const rulesAgreement = document.getElementById('rules').value;

                const data = {
                    username: username,
                    age: age,
                    discordTag: discordTag,
                    experience: experience,
                    motivation: motivation,
                    rulesAgreement: rulesAgreement
                };

                fetch('https://discord.com/api/webhooks/1298623683539243039/clWBbcgwj1hsf16BjH0JIF9SF59Sp5waLT6wvKMGXbXC-4edKwUqtvokmO-YPc6K4WFC', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        content: `New Application Submitted!\n\n**Username:** ${data.username}\n**Age:** ${data.age}\n**Discord Tag:** ${data.discordTag}\n**Experience:** ${data.experience}\n**Motivation:** ${data.motivation}\n**Agrees to Rules:** ${data.rulesAgreement}`
                    })
                })
                .then(response => {
                    if (response.ok) {
                        showNotification('Application submitted successfully!', true);
                        form.reset(); // Reset form after submission
                    } else {
                        showNotification('Failed to submit application. Please try again.', false);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotification('An error occurred while submitting your application.', false);
                });
            });

            function showNotification(message, isSuccess) {
                notificationBox.textContent = message;
                notificationBox.style.backgroundColor = isSuccess ? '#2b2f33' : '#d8493f'; // Change color based on success or failure
                notificationBox.style.display = 'block'; // Show the notification box
                notificationBox.style.opacity = '1'; // Fade in

                // Fade out after a few seconds
                setTimeout(() => {
                    notificationBox.style.opacity = '0'; // Fade out
                    setTimeout(() => {
                        notificationBox.style.display = 'none'; // Hide the box after fading out
                    }, 500); // Match with the CSS transition duration
                }, 3000); // Display for 3 seconds
            }
        });
    </script>
</body>
</html>
