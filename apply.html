<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FORTUNE</title>
    <link rel="icon" type="image/x-icon" href="fortune-ico.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="section section5">
        <div class="top-rectangle"></div>

        <div class="header-left">
            <a href="index.html"> 
                <img src="fortune-art.png" alt="Fortune" class="about-image">
            </a>
        </div>

        <div class="header-right">
            <a href="https://discord.gg/PuvrCtAU" target="_blank" class="logo-wrapper">
                <i class="fi fi-brands-discord discord-logo"></i>
            </a>
        </div>

        <div class="content">

            <form class="application-form" id="application-form">
                <label for="steamusername">Steam Username:</label>
                <input type="text" id="steamusername" name="steamusername" required>

                <label for="steamid">SteamID64:</label>
                <input type="text" id="steamid" name="steamid" required>

                <label for="discordusername">Discord Username:</label>
                <input type="text" id="discordusername" name="discordusername" required>

                <label for="age">Age:</label>
                <input type="number" id="age" name="age" required>

                <label for="experience">What is your experience with SCP:SL?</label>
                <textarea id="experience" name="experience" rows="4" required></textarea>

                <label for="motivation">Why do you want to join our community?</label>
                <textarea id="motivation" name="motivation" rows="4" required></textarea>

                <label for="rules">Do you agree to follow the community rules?</label>
                <select id="rules" name="rules" required>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>

                <button type="submit" class="submit-btn">Submit Application</button>
            </form>

            <div id="notification" class="notification"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const form = document.getElementById('application-form');
            const notificationBox = document.getElementById('notification');

            form.addEventListener('submit', function(event) {
                event.preventDefault(); 

                const steamusername = document.getElementById('steamusername').value;
                const steamid = document.getElementById('steamid').value;
                const discordusername = document.getElementById('discordusername').value;
                const age = document.getElementById('age').value;
                const experience = document.getElementById('experience').value;
                const motivation = document.getElementById('motivation').value;
                const rulesAgreement = document.getElementById('rules').value;

                const data = {
                    steamusername: steamusername,
                    steamid: steamid,
                    discordusername: discordusername,
                    age: age,
                    experience: experience,
                    motivation: motivation,
                    rulesAgreement: rulesAgreement
                };

                fetch('https://discord.com/api/webhooks/1298623683539243039/clWBbcgwj1hsf16BjH0JIF9SF59Sp5waLT6wvKMGXbXC-4edKwUqtvokmO-YPc6K4WFC', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        embeds: [{
                            title: 'New Application Submitted',
                            color: 15158332, 
                            fields: [
                                {
                                    name: 'Steam Username',
                                    value: data.steamusername,
                                    inline: false 
                                },
                                {
                                    name: 'SteamID64',
                                    value: data.steamid,
                                    inline: false
                                },
                                {
                                    name: 'Discord Username',
                                    value: data.discordusername,
                                    inline: false
                                },
                                {
                                    name: 'Age',
                                    value: data.age,
                                    inline: false
                                },
                                {
                                    name: 'Experience',
                                    value: data.experience,
                                    inline: false 
                                },
                                {
                                    name: 'Motivation',
                                    value: data.motivation,
                                    inline: false
                                },
                                {
                                    name: 'Agrees to Rules',
                                    value: data.rulesAgreement,
                                    inline: false
                                }
                            ],
                        }]
                    })
                })
                .then(response => {
                    if (response.ok) {
                        showNotification('Application submitted successfully!', true);
                        document.getElementById('application-form').reset(); 
                    } else {
                        showNotification('Failed to submit application. Please try again.', false);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotification('An error occurred while submitting your application.', false);
                });

            });

            function showNotification(message, isSuccess) {
                notificationBox.textContent = message;
                notificationBox.style.backgroundColor = isSuccess ? '#2b2f33' : '#d8493f'; 
                notificationBox.style.display = 'block';
                notificationBox.style.opacity = '1'; 

                setTimeout(() => {
                    notificationBox.style.opacity = '0'; 
                    setTimeout(() => {
                        notificationBox.style.display = 'none'; 
                    }, 500); 
                }, 3000);
            }
        });
    </script>
</body>
</html>
